# 模型Model
在thinkphp中，模型Model可以理解为数据库表的操作管理对象，每个数据库表的所有操作管理功能被抽象为一个Model。使用Model就可以完成对数据库表的所有操作。

Model类的属性分为静态属性和动态属性。静态属性在路由阶段之前的应用初始化中就会被设置，动态属性则是在路由阶段之后的控制器调用中才会被设置。
# 数据库连接和数据库连接管理器
thinkphp框架具有丰富的数据库连接管理功能，可以管理分布式的数据库连接，还可以管理主从数据库连接。

为了统一实现数据库连接的同意管理，thinkphp创建了一个专门用于管理数据库连接的类——DbManager（数据库管理器）。

DbManager（数据库管理器）保存了所有的数据库连接实例，这些实例都是根据数据库配置文件生成。DbManager在app应用初始化阶段就会完成创建。

需要注意的是，每个Model类都有一个静态属性db用来保存DbManager（数据库管理器）实例，该静态属性通过ModelService服务实现初始化。
# Model对象、Query对象、Fetch对象和Builder对象的逻辑关系
Model对象负责业务逻辑，主要完成数据库操作类型的选择以及操作数据的准备。
Query对象负责查询逻辑，主要完成具体的数据库操作，包含了各种所有的数据库操作类型。由于sql语句的拼接生成较为复杂，thinkphp将sql语句的拼接生成从Query对象中独立出来，抽象成Builder对象。Query对象使用Builder对象拼接生成预编译sql语句后，通过调用PDO相关函数完成参数绑定和数据库操作，最终得到数据库反馈的操作结果。
Builder对象专门负责拼接生成预编译sql语句，可由Query对象或者Fetch对象调用。
Fetch对象负责生成sql语句（最终的sql语句），但并不执行。该类主要用于构建子查询语句。需要注意的是，Fetch对象调用Builder对象拼接生成预编译sql语句，然后使用Fetch对象自己的成员函数进行参数绑定（并没有使用PDO的参数绑定功能）。
# 数据库操作逻辑流程图
完整的数据库操作逻辑流程图见《ThinkPhp框架数据库操作逻辑关系图》